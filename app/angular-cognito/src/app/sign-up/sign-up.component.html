<meta name="viewport" content="width=device-width, initial-scale=1.0">
<div class="row justify-content-center">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">

  <div class="col-4">
    <div class="card">
      <div class="card-body">
        <div class="header">
          <p class="header-text">PRVCY</p>
          <hr>
          <p class="subheader-text">Video Sharing</p>
        </div>
        <div class="row">
          <div class="col mb-2">
            <mat-form-field class="matFormField" appearance="outline">
              <mat-label class="matLabel">Email: </mat-label>
              <input class="matInput" matInput placeholder="user@example.com" [formControl]="email" required [(ngModel)]="user.email">
              <mat-error *ngIf="email.invalid">{{getErrorMessage()}}</mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <label for="username" class="form-label">Username:</label>
            <input type="text" id="username" name="username" #username="ngModel" [(ngModel)]="user.username"
              class="form-control form-control-sm">
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <mat-form-field class="matFormField" appearance="outline">
              <mat-label class="matLabel" for="password">Password: </mat-label>
              <input matInput [type]="hide ? 'password' : 'text'" placeholder="Password123!" [formControl]="$any(password)" required [(ngModel)]="user.password">
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon id="eye">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <mat-error *ngIf="password.invalid">{{getPasswordErrorMessage()}}</mat-error>
            </mat-form-field>
            <!-- <label for="password" class="form-label">Password:</label>
            <div class="input-group input-group-sm">
              <input [type]="user.showPassword ? 'text' : 'password'" id="password" name="password" #password="ngModel"
                [(ngModel)]="user.password" class="form-control form-control-sm">
              <button type="button" class="btn btn-outline-secondary" (click)="user.showPassword = !user.showPassword">
                <i class="bi"
                  [ngClass]="{'bi-eye-fill': !user.showPassword, 'bi-eye-slash-fill': user.showPassword}"></i>
              </button>
            </div> -->
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <label for="name" class="form-label">Name:</label>
            <input type="text" id="name" name="name" #name="ngModel" [(ngModel)]="user.given_name"
              class="form-control form-control-sm">
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <label for="familyName" class="form-label">Family Name:</label>
            <input type="text" id="familyName" name="familyName" #familyName="ngModel" [(ngModel)]="user.family_name"
              class="form-control form-control-sm">
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <label for="birthdate" class="form-label">Birthdate:</label>
            <input type="date" id="birthdate" name="birthdate" #birthdate="ngModel" [(ngModel)]="user.birthdate"
              class="form-control form-control-sm">
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <label for="account_type" class="form-label">Account type:</label>
            <select id="account_type" name="account_type" #account_type="ngModel"
              [(ngModel)]="user['custom:account_type']" class="form-control form-control-sm">
              <option value="personal">Personal</option>
              <option value="business">Business</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col mb-2">
            <label class="form-label">Enter your organization code if you have one here:</label>
            <input type="text" id="organization" name="organization" #organization="ngModel"
              [(ngModel)]="user['custom:organization']" class="form-control form-control-sm">
          </div>
        </div>
        <div class="row">
          <div class="col d-grid">
            <button type="button" (click)="signUp(user['custom:organization'])" class="btn btn-sm btn-success"
              [disabled]="loading">
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" *ngIf="loading"></span>
              Sign up
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>